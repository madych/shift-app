<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>ã‚·ãƒ•ãƒˆè¡¨ï¼ˆæœˆæ›œã¯ã˜ã¾ã‚Šãƒ»æœˆã€œåœŸï¼‰</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: sans-serif; padding: 10px; }
table { border-collapse: collapse; width: 100%; margin-top: 10px; }
th, td { border: 1px solid #999; padding: 6px; text-align: center; }
th { background: #eee; }
input { width: 100%; box-sizing: border-box; text-align: center; }
button { margin: 4px 2px; padding: 6px 10px; }
@media print {
  button { display: none; }
}
</style>
</head>

<body>

<h2>ã‚·ãƒ•ãƒˆè¡¨ï¼ˆæœˆæ›œã¯ã˜ã¾ã‚Šãƒ»æœˆã€œåœŸï¼‰</h2>

<button onclick="prevWeek()">â—€ å‰é€±</button>
<button onclick="nextWeek()">æ¬¡é€± â–¶</button>
<button onclick="addStaff()">ï¼‹ã‚¹ã‚¿ãƒƒãƒ•è¿½åŠ </button>
<button onclick="print()">ğŸ–¨ A4å°åˆ·</button>

<div id="table"></div>

<script>
let staff = ["ç”°ä¸­", "ä½è—¤"];
let shifts = {};
let weekStart = getMonday(new Date());

function getMonday(d) {
  d = new Date(d);
  const day = d.getDay();
  const diff = d.getDate() - day + (day === 0 ? -6 : 1);
  d.setDate(diff);
  d.setHours(0,0,0,0);
  return d;
}

function formatDate(d) {
  return `${d.getMonth()+1}/${d.getDate()}`;
}

function render() {
  let html = "<table><tr><th>åå‰</th>";
  for (let i=0;i<6;i++) {
    const d = new Date(weekStart);
    d.setDate(d.getDate()+i);
    html += `<th>${["æœˆ","ç«","æ°´","æœ¨","é‡‘","åœŸ"][i]}<br>${formatDate(d)}</th>`;
  }
  html += "</tr>";

  staff.forEach(name => {
    html += `<tr><td><input value="${name}" onchange="renameStaff('${name}',this.value)"></td>`;
    for (let i=0;i<6;i++) {
      const key = name + "-" + i;
      html += `<td>
        <input value="${shifts[key]||""}" 
               onclick="toggle(this,'${key}')">
      </td>`;
    }
    html += "</tr>";
  });

  html += "</table>";
  document.getElementById("table").innerHTML = html;
}

function toggle(el,key){
  el.value = el.value === "ã€‡" ? "" : "ã€‡";
  shifts[key] = el.value;
}

function addStaff(){
  staff.push("æ–°è¦");
  render();
}

function renameStaff(oldName,newName){
  staff = staff.map(n => n===oldName ? newName : n);
  render();
}

function prevWeek(){
  weekStart.setDate(weekStart.getDate()-7);
  render();
}

function nextWeek(){
  weekStart.setDate(weekStart.getDate()+7);
  render();
}

render();
</script>

</body>
</html>
